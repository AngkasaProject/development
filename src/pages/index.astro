---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro'
import Cover from '../components/Cover.astro'
import Opening from '../components/Opening.astro'
import Quotes from '../components/Quotes.astro'
import Mempelai from '../components/Mempelai.astro'
import Acara from '../components/Acara.astro'
import Maps from '../components/Maps.astro'
import RSVP from '../components/RSVP.astro'
import Gift from '../components/Gift.astro'
import Closing from '../components/Closing.astro'
import Navbar from '../components/Navbar.astro'
import Preloader from '../components/Preloader.astro'

// Import Config untuk Title
import { UNDANGAN_CONFIG } from '../data/config'
const pageTitle = `The Wedding of ${UNDANGAN_CONFIG.brideName} & ${UNDANGAN_CONFIG.groomName}`
---

<Layout title={pageTitle}>
  <div
    id="compatibility-modal"
    class="modal fixed inset-0 z-[300] flex hidden items-center justify-center p-4 opacity-0"
    aria-labelledby="modal-title"
    role="dialog"
    aria-modal="true"
  >
    <div
      class="modal-content w-full max-w-sm scale-95 transform transition-all"
    >
      <div class="rounded-2xl bg-white p-6 text-center shadow-2xl">
        <div class="color-accent-2 mb-4 text-5xl">
          <i class="fas fa-exclamation-triangle"></i>
        </div>

        <h3 class="mb-3 text-xl font-bold text-gray-900" id="modal-title">
          Perhatian Kompatibilitas Browser
        </h3>

        <p class="mb-4 text-sm">
          Browser yang Anda gunakan mungkin tidak sepenuhnya kompatibel atau
          kurang mendukung fitur-fitur modern (seperti audio).
        </p>

        <div
          class="mb-5 rounded-2xl border border-red-200 bg-red-50 p-3 text-left"
        >
          <p class="mb-2 text-sm font-semibold text-red-700">
            Masalah yang Terdeteksi:
          </p>
          <ul
            id="compatibility-error-list"
            class="list-inside list-disc space-y-1 text-xs text-red-600"
          >
          </ul>
        </div>

        <button
          onclick="closeModal('compatibility-modal')"
          class="w-full rounded-2xl bg-[#C6915A] py-2 font-bold text-white transition hover:bg-[#a67d4e]"
        >
          Tetap Lanjutkan (Risiko Ditanggung)
        </button>
      </div>
    </div>
  </div>

  <Preloader />

  <audio id="background-music" loop preload="auto">
    <source src={UNDANGAN_CONFIG.musicUrl} type="audio/mp3" />
  </audio>

  <div id="fullscreen-container" class="relative">
    <Cover />

    <div
      id="mobile-wrapper"
      class="background-modern1 relative h-screen overflow-hidden"
    >
      <!-- Music Control -->
      <div
        id="floating-music-controls"
        class="floating-action d-flex align-items-end flex-column z-[101] space-y-3 duration-500"
      >
        <button
          id="music-pause-button"
          class="btn-float bg-accent text-white"
          aria-label="Toggle Play/Pause"
        >
          <i id="pause-icon" class="fas fa-pause text-xl"></i>
        </button>

        <!-- 2. Mute/Unmute Button -->
        <button
          id="music-mute-button"
          class="btn-float nav-blur text-white hover:bg-gray-500"
          aria-label="Toggle Mute"
        >
          <!-- Ikon Volume Up -->
          <i id="mute-icon" class="fas fa-volume-up text-xl"></i>
        </button>
      </div>
      <!-- End- Music Control -->

      <Opening />

      <Mempelai />

      <Quotes />

      <Acara />

      <Maps />

      <RSVP />

      <Gift />

      <Closing />

      <Navbar />

      <!-- CREDIT FOOTER (Initial position: fixed bottom, hidden) -->
      <div
        id="credit-footer"
        class="pointer-events-none fixed right-0 bottom-0 left-0 z-50 w-full border-t border-gray-200 bg-white/90 py-2 text-center text-xs opacity-0 backdrop-blur-sm transition-all duration-500"
      >
        <div class="mx-auto max-w-screen-xl px-4">
          <p>
            Dibuat dengan ❤️ oleh
            <strong class="color-accent font-semibold">Angkasa Project</strong>
          </p>
          <p class="text-center text-[10px]">&copy; 2025 VibeCoding</p>
        </div>
      </div>
    </div>
  </div>
</Layout>
